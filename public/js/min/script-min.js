$(document).ready(function(){function e(){p=["h_1","h_2","h_3","h_4","h_5","h_6","h_7","h_8","h_9","h_10","h_11","h_12","h_13","s_1","s_2","s_3","s_4","s_5","s_6","s_7","s_8","s_9","s_10","s_11","s_12","s_13","d_1","d_2","d_3","d_4","d_5","d_6","d_7","d_8","d_9","d_10","d_11","d_12","d_13","c_1","c_2","c_3","c_4","c_5","c_6","c_7","c_8","c_9","c_10","c_11","c_12","c_13"]}function n(e,n,a){var c=p[Math.floor(Math.random()*p.length)];return p=jQuery.grep(p,function(e){return e!=c}),e.push(c),a?n.append($('<div class="card '+c+' hidden"><img src="/images/cards/'+c+'.jpg"></div>').hide().fadeIn(400)):n.append($('<div class="card '+c+'"><img src="/images/cards/'+c+'.jpg"></div>').hide().fadeIn(400)),i(r(u),g),c}function a(){_.html(""),$.each(u,function(e,n){_.append($('<div class="card '+n+'"><img src="/images/cards/'+n+'.jpg"></div>').hide().fadeIn(400))}),t.html(""),$.each(f,function(e,n){t.append($('<div class="card '+n+'"><img src="/images/cards/'+n+'.jpg"></div>').hide().fadeIn(400))})}function c(){e(),h===!0&&(u=[],f=[],a(),m.html("")),n(u,_,!1),setTimeout(function(){n(f,t,!0)},400),setTimeout(function(){n(u,_,!1)},800),setTimeout(function(){n(f,t,!1)},1200),h=!0}function s(){$(".hidden").each(function(){$(this).removeClass("hidden")})}function r(e){var n=0;return $.each(e,function(n,a){var c=a.split("_"),s=parseInt(c[1]);1==s&&(e=jQuery.grep(e,function(e){return e!=a}),e.push(a))}),$.each(e,function(e,a){var c=a.split("_"),s=parseInt(c[1]);switch(s){case 1:n+=11>n?10:s;break;case 2:n+=s;break;case 3:n+=s;break;case 4:n+=s;break;case 5:n+=s;break;case 6:n+=s;break;case 7:n+=s;break;case 8:n+=s;break;case 9:n+=s;break;case 10:n+=s;break;case 11:n+=10;break;case 12:n+=10;break;case 13:n+=10;break;default:n="Error"}}),n}function d(){console.log("dealer turn started"),s();var e=parseInt(r(f)),a=parseInt(r(u));for(i(r(f),m),console.log(e+" -pre draw"),17>e&&console.log("endgame Triggered 0");17>e;)console.log(e+" - before"),n(f,t,!1),console.log(e+" - mid"),e+=10,console.log(e+" - after"),i(e,m),17>e&&console.log("endgame Triggered 1")}function o(){var e=r(f),n=r(u);console.log("endgame triggered"),n>21?v.append("<p>Dealer wins!</p>"):e>21?v.append("<p>You win!</p>"):e>n?v.append("<p>Dealer wins!</p>"):e==n?v.append("<p>No one wins!</p>"):v.append("<p>You win!</p>")}function i(e,n){if(e>21)var a="Busted";else if(21==e)var a="BlackJack";else var a=e;n.hide().html(a).fadeIn(200),e>=21&&d()}var t=$("#dealer"),_=$("#player"),l=$("#actions"),p=null,u=[],f=[],h=!1,g=$("#player-score"),m=$("#dealer-score"),v=$(".console"),k=$("#drawButton"),b=$("#newDeal"),w=$("#devLogDeck"),I=$("#devRemoveHidden"),j=$("#stand-button");k.click(function(){n(u,_,!1)}),b.click(function(){c()}),j.click(function(){d()}),w.click(function(){console.log(p)}),I.click(function(){s()}),c()});